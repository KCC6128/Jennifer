<!DOCTYPE html>
<html lang="zh-Hant-TW">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>å¯«çœŸé¢¨æ ¼å°å åœ</title>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+TC:wght@400;500;700;900&display=swap" rel="stylesheet">
  <style>
    :root{
      --bg: #0f1115;
      --card: #161a22;
      --muted: #9aa3af;
      --text: #e8eaed;
      --brand: #f78da7;   /* ä¸»è‰²ï¼šæ¸…æ–°ç²‰ */
      --brand-2: #a8e6cf; /* è£œè‰²ï¼šè–„è·ç¶  */
      --ring: 0 0 0 3px rgba(247,141,167,.25);
      --radius: 16px;
    }
    *{box-sizing:border-box}
    html,body{height:100%}
    body{
      margin:0; background:linear-gradient(180deg,#0b0c10,#0f1115 30%,#121520 100%);
      font-family:"Noto Sans TC",ui-sans-serif,system-ui,-apple-system,"Segoe UI",Roboto,Helvetica,Arial;
      color:var(--text); -webkit-font-smoothing:antialiased; text-rendering:optimizeLegibility;
    }
    .wrap{max-width:960px;margin:0 auto;padding:24px}
    header{display:flex;align-items:center;justify-content:space-between;gap:12px;margin:18px 0 12px}
    h1{font-size:clamp(22px,4vw,32px);margin:0;font-weight:900;letter-spacing:.3px}
    .sub{color:var(--muted);margin:4px 0 0;font-size:clamp(13px,2.2vw,15px)}

    .shell{display:grid;grid-template-columns:1.05fr .95fr;gap:18px}
    @media (max-width: 860px){.shell{grid-template-columns:1fr}}

    .card{background:var(--card);border:1px solid rgba(255,255,255,.06);border-radius:var(--radius);
      box-shadow:0 8px 30px rgba(0,0,0,.35)}

    .panel{padding:18px}

    .meta{display:flex;align-items:center;justify-content:space-between;gap:10px;margin-bottom:10px}
    .steps{font-size:13px;color:var(--muted)}

    .progress{height:10px;background:#0e131a;border-radius:999px;overflow:hidden;border:1px solid rgba(255,255,255,.06)}
    .bar{height:100%;width:0;background:linear-gradient(90deg,var(--brand),var(--brand-2));transition:width .35s ease}

    .q-title{font-weight:800;margin:12px 0 8px;font-size:clamp(18px,3.6vw,22px)}

    .opts{display:grid;gap:10px}
    @media (min-width:720px){.opts{grid-template-columns:1fr 1fr}}

    .opt{position:relative;border:1px solid rgba(255,255,255,.08);background:#121622;border-radius:14px;padding:14px;cursor:pointer;
      transition:transform .15s ease,border-color .15s ease,background .15s ease}
    .opt:hover{transform:translateY(-1px);}
    .opt input{position:absolute;opacity:0;pointer-events:none}
    .opt .text{font-size:16px;line-height:1.5}
    .opt:has(input:checked){border-color:var(--brand);background:#151b27;box-shadow:var(--ring)}

    .actions{display:flex;justify-content:space-between;gap:10px;margin-top:14px}
    .btn{appearance:none;border:1px solid rgba(255,255,255,.1);padding:12px 16px;border-radius:12px;color:var(--text);background:#121622;cursor:pointer;font-weight:700}
    .btn.primary{background:linear-gradient(135deg,var(--brand),var(--brand-2));color:#0b0c10;border:none}
    .btn[disabled]{opacity:.5;cursor:not-allowed}

    /* å³å´çµæœå¡ */
    .result{padding:18px;display:grid;gap:12px}
    .hid{display:none}
    .style-badge{display:inline-flex;align-items:center;gap:8px;background:#141a24;border:1px solid rgba(255,255,255,.06);
      color:#ffd6de;padding:8px 12px;border-radius:999px;font-size:13px;font-weight:800}
    .desc{color:#d7d9df}
    .imgbox{position:relative;border-radius:14px;overflow:hidden;border:1px solid rgba(255,255,255,.06)}
    .imgbox img{width:100%;height:auto;display:block}
    .imgbox .cap{position:absolute;inset:auto 10px 10px 10px;color:#0b0c10;background:rgba(255,255,255,.9);
      border-radius:999px;padding:6px 10px;font-size:12px;font-weight:800}

    .hint{font-size:12px;color:var(--muted)}

    /* é€²å ´å‹•ç•« */
    .fade-up{animation:fadeUp .35s ease both}
    @keyframes fadeUp{from{opacity:0;transform:translateY(8px)}to{opacity:1;transform:translateY(0)}}

    /* å¯å­˜å–æ€§ */
    .sr{position:absolute;width:1px;height:1px;padding:0;margin:-1px;overflow:hidden;clip:rect(0,0,0,0);white-space:nowrap;border:0}
  </style>
</head>
<body>
  <div class="wrap">
    <header>
      <div>
        <h1>ğŸ¥ å¯«çœŸé¢¨æ ¼å°å åœ</h1>
        <p class="sub">å›ç­” 8 é¡Œï¼Œæ‰¾åˆ°æœ€é©åˆä½ çš„å¯«çœŸé¢¨æ ¼ã€‚</p>
      </div>
    </header>

    <div class="shell">
      <!-- å·¦ï¼šå•ç­”å¡ -->
      <section class="card panel" aria-labelledby="quiz-heading">
        <h2 id="quiz-heading" class="sr">å åœå•é¡Œ</h2>
        <div class="meta">
          <div class="steps"><span id="step">ç¬¬ 1 é¡Œ</span>ï¼å…± 8 é¡Œ</div>
          <div class="steps" id="sel-hint">è«‹å…ˆé¸æ“‡ä¸€å€‹é¸é …</div>
        </div>
        <div class="progress" aria-hidden="true"><div id="bar" class="bar" style="width:0%"></div></div>

        <h3 id="q" class="q-title fade-up">å•é¡Œ</h3>
        <div id="opts" class="opts fade-up" role="radiogroup" aria-describedby="q"></div>

        <div class="actions">
          <button id="prev" class="btn" disabled>â† ä¸Šä¸€é¡Œ</button>
          <div style="display:flex;gap:10px">
            <!-- <button id="skip" class="btn" title="ç•¥éæ­¤é¡Œ">ç•¥é</button> -->
            <button id="next" class="btn primary">ä¸‹ä¸€é¡Œ â†’</button>
          </div>
        </div>
        <div id="live" class="sr" aria-live="polite"></div>
      </section>

      <!-- å³ï¼šçµæœå¡ -->
      <aside class="card result" aria-live="polite">
        <div id="before" class="fade-up">
          <span class="style-badge">ğŸ’¡ å°æç¤º</span>
          <p class="desc">ä½œç­”å®Œæˆå¾Œï¼Œé€™è£¡æœƒå‡ºç¾ä½ çš„å€‹äººåŒ–çµæœï¼š<b>å»ºè­°å¯«çœŸé¢¨æ ¼</b>ã€<b>é¢¨æ ¼å°æ•…äº‹</b>èˆ‡<b>ä½œå“é€£çµ</b>ã€‚</p>
        </div>

        <div id="after" class="hid fade-up">
          <div style="display:flex;align-items:center;justify-content:space-between;gap:8px">
            <span class="style-badge" id="style-badge">ğŸ“¸ æ¨è–¦é¢¨æ ¼</span>
            <a id="more" class="btn" href="https://kcc6128.github.io/Jennifer/works.html" target="_blank" rel="noopener">æŸ¥çœ‹æ›´å¤šä½œå“</a>
          </div>
          <p id="story" class="desc" style="margin:6px 0 8px"></p>
          <div class="imgbox">
            <img id="img" alt="é¢¨æ ¼ç¤ºä¾‹">
            <span class="cap" id="cap">æ—¥ç³»ãƒ»æŸ”å…‰</span>
          </div>
        </div>
      </aside>
    </div>
  </div>

  <script>
    // ===== å•å·è³‡æ–™ï¼ˆæ‰¿æ¥ä½ åŸæœ¬çš„é¡Œç›®èˆ‡é…åˆ†ï¼‰ =====
	const quizData = [
	  {
		question: "åœ¨ä¸€åº§é™Œç”Ÿçš„åŸå¸‚ï¼Œä½ æœ€å®¹æ˜“è¢«å“ªè£¡å¸å¼•ï¼Ÿ",
		options: [
		  { text: "æ¸…æ™¨çš„æ¿•æ½¤å°å¾‘ä¸Šï¼Œè–„éœ§æ‚ æ‚ é£„æ•£", scores: { "æ—¥ç³»å¯«çœŸ": 5, "è¼•å©šç´—å¯«çœŸ": 1 } },
		  { text: "è½‰è§’çš„ç»ç’ƒçª—é‚Šï¼Œå…©äººå…±äº«ä¸€æ¯é£²æ–™", scores: { "æƒ…ä¾¶å¯«çœŸ": 5, "æ—¥ç³»å¯«çœŸ": 1 } },
		  { text: "é™Œç”ŸåŸå¸‚è£¡ï¼Œä¸€è™•å‚³ä¾†æ­¡å‘¼èˆ‡ç‡­å…‰çš„æ°£æ¯ï¼Œåƒæ´¾å°æ­£åœ¨å±•é–‹", scores: { "ç”Ÿæ—¥å¯«çœŸ": 5 } },
		  { text: "å±‹é ‚ä¸Šçš„ç¶ æ„éš¨é¢¨æ–æ›³ï¼Œè¦–é‡é–‹é—Šè€Œæ¸…æ–°", scores: { "è¼•å©šç´—å¯«çœŸ": 5, "æƒ…ä¾¶å¯«çœŸ": 1 } }
		]
	  },
	  {
		question: "å“ªç¨®å…‰ï¼Œæœƒè®“ä½ è¦ºå¾—ã€å‰›å‰›å¥½ã€ï¼Ÿ",
		options: [
		  { text: "æ™¨å…‰ç©¿éé›²å±¤ï¼Œæ³›è‘—æ·¡æ·¡æŸ”è‰²", scores: { "æ—¥ç³»å¯«çœŸ": 5 } },
		  { text: "å‚æ™šçš„æ–œé™½ç‘è½ï¼Œå½±å­å°‡å…©å€‹äººæº«æŸ”ç‰½å¼•", scores: { "æƒ…ä¾¶å¯«çœŸ": 4, "æ—¥ç³»å¯«çœŸ": 1 } },
		  { text: "å°ç‡ˆèˆ‡è Ÿç‡­äº¤èï¼Œè®“å®¤å…§ç©ºæ°£æ³›è‘—ç”œæŸ”çš„é¦™å‘³", scores: { "ç”Ÿæ—¥å¯«çœŸ": 5 } },
		  { text: "å…‰ç·šä¹¾æ·¨è€Œå‡å‹»ï¼Œå½·å½¿ä¸–ç•Œçš„é›œè¨Šéƒ½è¢«æ‚„æ‚„é—œæ‰", scores: { "è¼•å©šç´—å¯«çœŸ": 5 } }
		]
	  },
	  {
		question: "ä»Šå¤©çš„ç¯€å¥ï¼Œæœ€åƒå“ªä¸€ç¨®ï¼Ÿ",
		options: [
		  { text: "æ…¢æ…¢èµ°ã€æ…¢æ…¢çœ‹ï¼ŒæŠŠç©ºç™½ç•™çµ¦è‡ªå·±", scores: { "æ—¥ç³»å¯«çœŸ": 5 } },
		  { text: "å…©äººçš„æ­¥ä¼ï¼Œæ°å¥½å…±é³´åœ¨åŒä¸€æ‹å­ä¸Š", scores: { "æƒ…ä¾¶å¯«çœŸ": 5 } },
		  { text: "ä¸€ç¾¤äººçš„ç¬‘è²æ­¤èµ·å½¼è½ï¼Œç†±é¬§ä¸æ–·", scores: { "ç”Ÿæ—¥å¯«çœŸ": 5 } },
		  { text: "å®›è‹¥åºæ›²èˆ¬çš„ç¯€å¥ï¼Œç·©ç·©æ­é–‹æ•…äº‹çš„ç¯‡ç« ", scores: { "è¼•å©šç´—å¯«çœŸ": 5 } }
		]
	  },
	  {
		question: "å¦‚æœç…§ç‰‡æœ‰æ°£å‘³ï¼Œä½ æœƒé¸å“ªä¸€ç¨®ï¼Ÿ",
		options: [
		  { text: "åƒé›¨å¾Œæœ¨é ­èˆ‡æ£‰å¸ƒæ•£ç™¼çš„æŸ”å’Œæ°£å‘³", scores: { "æ—¥ç³»å¯«çœŸ": 5 } },
		  { text: "ç™½æ¡ƒçš„é¦™æ°£è£¹è‘—å°èŠ±æŸçš„è¼•ç”œèŠ¬èŠ³", scores: { "æƒ…ä¾¶å¯«çœŸ": 4, "è¼•å©šç´—å¯«çœŸ": 1 } },
		  { text: "å¥¶æ²¹è›‹ç³•çš„ç”œé¦™ä¼´è‘—æ°£æ³¡é£²çš„è¼•å¿«ï¼Œæ´‹æº¢è‘—æ­¡æ„‰æ°£æ¯", scores: { "ç”Ÿæ—¥å¯«çœŸ": 5 } },
		  { text: "ç™½èŒ¶çš„æ¸…æ–°èˆ‡æ›¸é çš„ç´™é¦™äº¤èï¼Œåƒåˆå§‹èˆ¬ç´”æ·¨", scores: { "è¼•å©šç´—å¯«çœŸ": 5 } }
		]
	  },
	  {
		question: "ä½ æœ€è‡ªåœ¨çš„æ§‹åœ–æ˜¯ï¼Ÿ",
		options: [
		  { text: "ç•«é¢ç•™ç™½å»£é—Šï¼Œå½·å½¿ç©ºæ°£æ­£è¼•è¼•æ“æŠ±ä¸»è§’", scores: { "æ—¥ç³»å¯«çœŸ": 5 } },
		  { text: "è¦–ç·šåœ¨å…©äººä¹‹é–“æ¸¸ç§»ï¼Œç•«é¢åƒéœéœå±•é–‹çš„å°è©±", scores: { "æƒ…ä¾¶å¯«çœŸ": 5 } },
		  { text: "é‡è¤‡çš„å°å…ƒç´ åœ¨ç•«é¢è£¡é–ƒçˆï¼Œå¦‚åŒç´°ç·»çš„è¿´éŸ¿", scores: { "ç”Ÿæ—¥å¯«çœŸ": 5 } },
		  { text: "ç•«é¢åœ¨å°ç¨±ä¸­é¡¯å¾—ä¿è½ï¼Œé‡é»åƒè¢«å…‰ç·šç›´æ¥æ¨™å‡º", scores: { "è¼•å©šç´—å¯«çœŸ": 5 } }
		]
	  },
	  {
		question: "å“ªç¨®é¡è‰²é—œä¿‚æœ€è²¼è¿‘ä½ ï¼Ÿ",
		options: [
		  { text: "ç±³ç™½èˆ‡ç°ç¶ çš„ä½é£½å’Œè‰²èª¿ï¼Œå¦‚åŒéœ§é¢å¥¶æ²¹çš„æŸ”å’Œè³ªæ„Ÿ", scores: { "æ—¥ç³»å¯«çœŸ": 5 } },
		  { text: "æ·¡ç²‰èˆ‡æš–æ£•çš„è‰²èª¿ï¼Œå¦‚åŒç´„æœƒå¾Œæ™šéœçš„å‘¢å–ƒ", scores: { "æƒ…ä¾¶å¯«çœŸ": 4, "æ—¥ç³»å¯«çœŸ": 1 } },
		  { text: "æŸ‘æ©˜è‰²èˆ‡æ°£çƒçš„ç¹½ç´›ï¼Œå¦‚åŒç©ºæ°£è£¡ä¸æ–·éŸ¿èµ·çš„æ­¡å‘¼è²", scores: { "ç”Ÿæ—¥å¯«çœŸ": 5 } },
		  { text: "ç´”ç™½èˆ‡é‡‘è‰²ç›¸äº’è¼æ˜ ï¼Œä¹¾æ·¨ç´”ç²¹ä¸­é€è‘—å…¸é›…çš„å„€å¼æ„Ÿ", scores: { "è¼•å©šç´—å¯«çœŸ": 5 } }
		]
	  },
	  {
		question: "é¡é ­å‰ï¼Œä½ é€šå¸¸æœƒâ€¦",
		options: [
		  { text: "æ‰‹è‡ªç„¶å‚è½ï¼Œå½·å½¿èµ°åœ¨é¢¨è£¡èˆ¬è‡ªåœ¨", scores: { "æ—¥ç³»å¯«çœŸ": 5 } },
		  { text: "é è¿‘ä¸€äº›ï¼Œçœ¼ç¥å’Œç¬‘å®¹éƒ½ä¸è‡ªè¦ºåŒæ­¥", scores: { "æƒ…ä¾¶å¯«çœŸ": 5 } },
		  { text: "ä¸»å‹•æ‰¾æ¢—ï¼Œå¤§å®¶ä¸€èµ·ç©èµ·ä¾†", scores: { "ç”Ÿæ—¥å¯«çœŸ": 5 } },
		  { text: "ç©©ä½æ­¥ä¼ï¼Œè½‰èº«æ·±å‘¼å¸ï¼Œåƒæ•…äº‹æ‚„æ‚„å±•é–‹æ–°çš„ç¯‡ç« ", scores: { "è¼•å©šç´—å¯«çœŸ": 5 } }
		]
	  },
	  {
		question: "è‹¥æŠŠä»Šå¤©è®Šæˆä¸€é¦–é…æ¨‚â€¦",
		options: [
		  { text: "æœ¨å‰ä»–èˆ‡ä½æ²‰çš„åº•å™ªäº¤ç¹”ï¼Œå¦‚åŒåˆå¾Œçš„æ“æŠ±èˆ¬éœè¬", scores: { "æ—¥ç³»å¯«çœŸ": 5 } },
		  { text: "å…©äººçš„æ­Œè²åœ¨ç©ºæ°£ä¸­ç›¸ä¾ç›¸å’Œï¼Œæ—‹å¾‹å¦‚åŒè‚©ä¸¦è‚©èˆ¬å¥‘åˆ", scores: { "æƒ…ä¾¶å¯«çœŸ": 5 } },
		  { text: "è¼•å¿«çš„æ—‹å¾‹ä¼´éš¨æŒè²éŸ¿èµ·ï¼Œåƒå½©å¸¶èˆ¬åœ¨ç©ºæ°£ä¸­é£›èˆ", scores: { "ç”Ÿæ—¥å¯«çœŸ": 5 } },
		  { text: "å¼¦æ¨‚åºæ›²å¦‚åŒé–‹å ´çš„ç¦®è®šï¼ŒèŠé‡è€Œæ˜äº®ï¼Œæ­é–‹æ–°ç¯‡ç« ", scores: { "è¼•å©šç´—å¯«çœŸ": 5 } }
		]
	  }
	];

    // é¢¨æ ¼è³‡æ–™ï¼ˆé™„ç¯„ä¾‹åœ–é€£çµï¼›è‹¥æª”æ¡ˆä¸å­˜åœ¨æœƒè‡ªå‹•é€€å›ä½ˆæ™¯è‰²å¡Šï¼‰
	const styles = {
	  "æ—¥ç³»å¯«çœŸ": {
		desc: "æ¸…æ–°è‡ªç„¶ï¼Œæ•æ‰ç”Ÿæ´»ä¸­ç´°è†©çš„æº«åº¦ã€‚ä»¥æŸ”å’Œå…‰å½±èˆ‡ä½é£½å’Œè‰²èª¿ï¼Œå‘ˆç¾å‡ºçŒ¶å¦‚é›»å½±ç‰‡æ®µèˆ¬çš„æº«æš–æ•…äº‹ã€‚",
		image: "img/works/æ—¥ç³»å¯«çœŸ/è²“å’ªæµ´è¡£.webp",
		link: "https://kcc6128.github.io/Jennifer/works.html#japan",
		cap: "æ—¥ç³»ãƒ»æŸ”å…‰"
	  },
	  "æƒ…ä¾¶å¯«çœŸ": {
		desc: "ç´€éŒ„ä½ å€‘ä¹‹é–“çœŸå¯¦çš„äº’å‹•èˆ‡ç¬‘å®¹ï¼Œç”¨è‡ªç„¶æµéœ²çš„æƒ…æ„Ÿå¯«ä¸‹æœ€å‹•äººçš„æ„›æƒ…ç¯‡ç« ï¼Œç•™ä¸‹å°ˆå±¬æ–¼ä½ å€‘çš„æ•…äº‹ã€‚",
		image: "img/works/æƒ…ä¾¶å¯«çœŸ/CUæƒ…ä¾¶.webp",
		link: "https://kcc6128.github.io/Jennifer/works.html#couple",
		cap: "æƒ…ä¾¶ãƒ»äº’å‹•"
	  },
	  "ç”Ÿæ—¥å¯«çœŸ": {
		desc: "å°ˆå±¬ä½ çš„ç‰¹åˆ¥æ—¥ï¼Œç”¨è›‹ç³•ã€æ°£çƒèˆ‡æ»¿æ»¿çš„ç¬‘å®¹é»ç¶´å›æ†¶ã€‚æ•æ‰æ¯å€‹çœŸæ‘¯çš„æ­¡ç¬‘ï¼Œè®“ç”Ÿæ—¥æ™‚å…‰åŒ–ä½œæ°¸æ†ç´€å¿µã€‚",
		image: "img/works/ç”Ÿæ—¥å¯«çœŸ/å¦èŠ¸ç”Ÿæ—¥.webp",
		link: "https://kcc6128.github.io/Jennifer/works.html#birthday",
		cap: "ç”Ÿæ—¥ãƒ»æ´¾å°"
	  },
	  "è¼•å©šç´—å¯«çœŸ": {
		desc: "ç°¡ç´„å»å……æ»¿æƒ…æ„Ÿï¼Œç”¨è‡ªç„¶æ¸…æ–°çš„æ–¹å¼è©®é‡‹æ„›èˆ‡æ‰¿è«¾ã€‚è¼•æŸ”å…¸é›…ï¼Œå°‡å±¬æ–¼ä½ å€‘çš„å©šç´—æ•…äº‹å‡çµåœ¨æœ€ç´”ç²¹çš„ç¬é–“ã€‚",
		image: "img/works/è¼•å©šç´—å¯«çœŸ/é»é»å©šç´—.webp",
		link: "https://kcc6128.github.io/Jennifer/works.html#light_wedding_dress",
		cap: "å©šç´—ãƒ»å„ªé›…"
	  }
	};

    let idx = 0; // ç›®å‰é¡Œç›®
    const scores = {"æ—¥ç³»å¯«çœŸ":0,"æƒ…ä¾¶å¯«çœŸ":0,"ç”Ÿæ—¥å¯«çœŸ":0,"è¼•å©šç´—å¯«çœŸ":0};
    const chosen = new Array(quizData.length).fill(null);

    // DOM
    const qEl = document.getElementById('q');
    const optsEl = document.getElementById('opts');
    const stepEl = document.getElementById('step');
    const barEl = document.getElementById('bar');
    const liveEl = document.getElementById('live');
    const prevBtn = document.getElementById('prev');
    const nextBtn = document.getElementById('next');
    const skipBtn = document.getElementById('skip');

    const beforeEl = document.getElementById('before');
    const afterEl = document.getElementById('after');
    const storyEl = document.getElementById('story');
    const badgeEl = document.getElementById('style-badge');
    const imgEl = document.getElementById('img');
    const capEl = document.getElementById('cap');
    const moreEl = document.getElementById('more');

    const total = quizData.length;

    // åˆå§‹
    render();

    prevBtn.addEventListener('click',()=>{ if(idx>0){ idx--; render(); } });
    nextBtn.addEventListener('click', onNext);
    skipBtn.addEventListener('click', ()=>{ chosen[idx] = null; onNext(); });

    function onNext(){
      if(chosen[idx] == null){
        announce('è«‹å…ˆé¸æ“‡ä¸€å€‹é¸é …');
        bump();
        return;
      }
      if(idx < total-1){ idx++; render(); }
      else { finish(); }
    }

    function render(){
      // æ¨™é¡Œ / æ­¥é©Ÿ
      stepEl.textContent = `ç¬¬ ${idx+1} é¡Œ`;
      const progress = Math.round((idx)/total*100);
      barEl.style.width = progress + '%';

      const data = quizData[idx];
      qEl.textContent = data.question;

      // é¸é …
      optsEl.innerHTML = '';
      data.options.forEach((opt, i)=>{
        const id = `q${idx}_o${i}`;
        const label = document.createElement('label');
        label.className = 'opt fade-up';
        label.setAttribute('for', id);
        label.innerHTML = `
          <input id="${id}" type="radio" name="q${idx}" ${chosen[idx]===i?'checked':''} />
          <div class="text">${opt.text}</div>
        `;
        label.addEventListener('click',()=>{
          chosen[idx] = i;
          if(window.navigator?.vibrate) navigator.vibrate(8);
          announce(`å·²é¸æ“‡ï¼š${opt.text}`);
        });
        optsEl.appendChild(label);
      });

      prevBtn.disabled = idx===0;
      nextBtn.textContent = idx===total-1 ? 'çœ‹çµæœ â†’' : 'ä¸‹ä¸€é¡Œ â†’';
    }

    function finish(){
      // æ¸…åˆ†æ•¸
      for(const k in scores) scores[k]=0;
      chosen.forEach((choice, qIdx)=>{
        if(choice==null) return; // ç•¥éä¸åŠ åˆ†
        const opt = quizData[qIdx].options[choice];
        for(const style in opt.scores){ scores[style] += opt.scores[style]; }
      });
      const winner = Object.entries(scores).sort((a,b)=>b[1]-a[1])[0][0];
      const info = styles[winner];

      // ç”¢ç”Ÿä¸€æ®µã€Œå“ç‰Œèªæ°£ã€çš„å°æ•…äº‹ï¼ˆå‰ç«¯æœ¬åœ°ç‰ˆç¤ºä¾‹ï¼›ä¹‹å¾Œå¯æ”¹ç‚ºå¾Œç«¯ AIï¼‰
      const flavor = [
        'åƒåˆå¾Œçš„å¾®é¢¨è¼•æ‹‚ï¼Œé™½å…‰è½åœ¨ä½ æœ€è‡ªç„¶çš„ç¬‘å®¹ä¸Šã€‚',
        'åœ¨å…‰èˆ‡å½±äº¤éŒ¯çš„ç¸«éš™è£¡ï¼Œæ•…äº‹è¢«æº«æŸ”æ”¶è—ã€‚',
        'åœ¨å…‰å½±æµè½‰çš„ç¬é–“ï¼Œæ˜ ç…§å‡ºå°ˆå±¬æ–¼ä½ çš„è‰²å½©ã€‚'
      ];
      const line = flavor[(Math.random()*flavor.length)|0];
      storyEl.textContent = `${info.desc} ${line}`;

      badgeEl.textContent = `ğŸ“¸ æ¨è–¦é¢¨æ ¼ï½œ${winner}`;
      moreEl.href = info.link;
      capEl.textContent = info.cap || winner;

      imgEl.src = info.image;
      imgEl.onerror = ()=>{
        // å¦‚æœç«™ä¸Šæ²’æœ‰é€™å¼µåœ–ï¼Œåšä¸€å€‹ç°¡å–®æ¼¸å±¤ä½”ä½
        const ph = genPlaceholder(winner);
        imgEl.src = ph;
      };

      // é¡¯ç¤ºçµæœå€
      beforeEl.classList.add('hid');
      afterEl.classList.remove('hid');

      // é€²åº¦æ»¿æ ¼
      barEl.style.width = '100%';
    }

    function announce(msg){
      liveEl.textContent = msg;
    }

    function bump(){
      // å°æŠ–å‹•æç¤º
      optsEl.style.transform = 'translateY(-1px)';
      setTimeout(()=>optsEl.style.transform='translateY(0)', 120);
    }

    function genPlaceholder(text){
      const c = document.createElement('canvas');
      c.width = 1200; c.height = 800;
      const ctx = c.getContext('2d');
      const g = ctx.createLinearGradient(0,0,c.width,c.height);
      g.addColorStop(0,'#ffe1e9'); g.addColorStop(1,'#e0fff4');
      ctx.fillStyle=g; ctx.fillRect(0,0,c.width,c.height);
      ctx.fillStyle='#0f1115'; ctx.globalAlpha=.85;
      ctx.font='bold 64px Noto Sans TC';
      ctx.fillText(text, 60, 120);
      ctx.globalAlpha=1;
      return c.toDataURL('image/png');
    }
  </script>
</body>
</html>
